(function(){var t;t={els:".js-crispy",images:[],breakpoints:["32em","48em","62em","76em"],init:function(){this.currentBreakpoint=this.getCurrentBreakpoint(),this.gather(),this.bind()},bind:function(){var t=this;$(window).smartresize(function(){t.refreshImages()})},windowWidth:function(){return $(window).width()/Number($("body").css("font-size"))},getCurrentBreakpoint:function(){var t,i,r,n,e,a;for(t=this.breakpoints[0],a=this.breakpoints,r=function(i){return window.matchMedia&&window.matchMedia("all and (min-width: "+i+")").matches?t=i:void 0},n=0,e=a.length;e>n;n++)i=a[n],r(i);return t},testBreakpointChange:function(){var t;return t=this.getCurrentBreakpoint(),this.currentBreakpoint===t?!1:(this.currentBreakpoint=t,!0)},refreshImages:function(){this.testBreakpointChange()&&this.gather()},gather:function(){var t,i,r,n;for(i=$(this.els),this.images=[],r=0,n=i.length;n>r;r++)t=i[r],this.add(t);this.grabFromServer()},add:function(t){t=$(t),this.images.push({src:t.attr("data-src"),width:t.width()})},buildQuery:function(){var t={image:this.images};return $.param(t)},grabFromServer:function(){var t,i=this;t=this.buildQuery(),$.get("resize.php",t,function(t){var r,n,e;for(n=0,e=t.length;e>n;n++)r=t[n],i.loadImage(r)})},loadImage:function(t){var i,r;i=$("[data-src='"+t.og_src+"']"),r=$("<img />"),r.attr("src",t.src).attr("alt",i.attr("data-alt")),i.children("img").length?i.children("img").attr("src",t.src):r.load(function(){i.append(r),i.addClass("img-loaded")})}},$(document).ready(function(){t.init()})}).call(this);